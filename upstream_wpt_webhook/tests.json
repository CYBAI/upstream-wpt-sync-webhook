[
    {
        "name": "open new upstreamable PR",
        "payload": "new_pr.json",
        "db": {},
        "expected": [
            "FetchUpstreamableStep",
            "UpstreamStep",
            "OpenUpstreamStep",
            "CommentStep"
        ]
    },
    {
        "name": "open new upstreamable PR, no-sync",
        "payload": "new_pr_no_sync.json",
        "db": {},
        "expected": []
    },
    {
        "name": "open new non-upstreamable PR, no-sync",
        "payload": "new_pr_no_sync.json",
        "diff": "non-wpt.diff",
        "db": {},
        "expected": []
    },
    {
        "name": "open existing upstreamable PR",
        "payload": "new_pr.json",
        "db": {"18746": "1"},
        "expected": [
            "FetchUpstreamableStep",
            "UpstreamStep",
            "ChangeUpstreamStep",
            "CommentStep"
        ]
    },
    {
        "name": "open existing non-upstreamable PR",
        "payload": "new_pr.json",
        "diff": "non-wpt.diff",
        "db": {"18746": "1"},
        "expected": [
            "ChangeUpstreamStep",
            "CommentStep"
        ]
    },
    {
        "name": "close non-upstreamable PR",
        "payload": "close_pr.json",
        "db": {},
        "expected": []
    },
    {
        "name": "close upstreamable PR",
        "payload": "close_pr.json",
        "db": {"18746": "1"},
        "expected": [
            "ChangeUpstreamStep"
        ]
    },
    {
        "name": "synchronize upstreamable PR",
        "payload": "synchronize.json",
        "diff": "18746.diff",
        "db": {"19612": "1"},
        "expected": [
            "FetchUpstreamableStep",
            "UpstreamStep",
            "ChangeUpstreamStep",
            "CommentStep"
        ]
    },
    {
        "name": "synchronize newly non-upstreamable PR",
        "payload": "synchronize.json",
        "diff": "non-wpt.diff",
        "db": {"19612": "1"},
        "expected": [
            "ChangeUpstreamStep",
            "CommentStep"
        ]
    },
    {
        "name": "synchronize newly upstreamable PR",
        "payload": "synchronize.json",
        "diff": "18746.diff",
        "db": {},
        "expected": [
            "FetchUpstreamableStep",
            "UpstreamStep",
            "OpenUpstreamStep",
            "CommentStep"
        ]
    },
    {
        "name": "synchronize non-upstreamable PR",
        "payload": "synchronize.json",
        "diff": "non-wpt.diff",
        "db": {},
        "expected": []
    }
]
